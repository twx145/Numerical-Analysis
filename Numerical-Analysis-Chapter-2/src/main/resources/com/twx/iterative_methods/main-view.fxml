<?xml version="1.0" encoding="UTF-8"?>

<?import com.twx.iterative_methods.view.OneDimPlot?>
<?import com.twx.iterative_methods.view.TwoDimPlot?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="850.0" prefWidth="1200.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.twx.iterative_methods.controller.MainController">
    <top>
        <VBox spacing="10" alignment="CENTER" styleClass="control-panel" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <Label text="方程迭代解法可视化" styleClass="header-label"/>
            <GridPane hgap="10" vgap="8" alignment="CENTER" style="-fx-padding: 10;">
                <Label text="求解方程 f(x)=0:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="fField" text="x^3 - x - 1" prefWidth="350" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                <Label fx:id="gLabel" text="迭代形式 x=g(x):" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="gField" text="(x+1)^(1/3)" prefWidth="350" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
            </GridPane>
            <HBox alignment="CENTER" spacing="10.0" style="-fx-padding: 10 0 0 0;">
                <Label text="选择方法:"/>
                <ComboBox fx:id="methodComboBox"/>

                <!-- 新增：用于设置更新间隔的UI容器 -->
                <HBox fx:id="intervalContainer" alignment="CENTER" spacing="5" visible="false" managed="false">
                    <Label text="更新间隔:"/>
                    <Spinner fx:id="intervalSpinner" prefWidth="60"/>
                </HBox>

                <Label text="初始值 x0:"/>
                <TextField fx:id="initialValueField" prefWidth="50" text="1.5"/>
                <HBox fx:id="x1Container" alignment="CENTER" spacing="5" visible="false" managed="false">
                    <Label text="初始值 x1:"/>
                    <TextField fx:id="secondInitialValueField" prefWidth="50" text="1.6"/>
                </HBox>
                <Button fx:id="resetButton" text="开始/重置"/>
                <Button fx:id="nextStepButton" text="下一步" disable="true"/>
                <Button fx:id="clearButton" text="清除路径"/>
            </HBox>
        </VBox>
    </top>
    <center>
        <SplitPane dividerPositions="0.65" BorderPane.alignment="CENTER">
            <VBox fx:id="plotContainer">
                <TwoDimPlot fx:id="twoDimPlot" VBox.vgrow="ALWAYS"/>
                <OneDimPlot fx:id="oneDimPlot" prefHeight="120" minHeight="80"/>
            </VBox>
            <VBox spacing="5">
                <padding>
                    <Insets top="10" right="10" bottom="10" left="10"/>
                </padding>
                <Label text="迭代日志" styleClass="sub-header-label"/>
                <TextArea fx:id="logArea" editable="false" VBox.vgrow="ALWAYS" style="-fx-font-family: 'monospaced';"/>
            </VBox>
        </SplitPane>
    </center>
</BorderPane>